var DragResizeBox=function(){"use strict";const t={drag:!0,zoom:!0,minWidth:0,minHeight:0,zIndex:9999,dragSelector:null,left:0,top:0,cornerSize:16,borderSize:12,center:!1,limitZoomArea:[]};return class{constructor(e,i){if(this.status="active",this.eventCenter={},this.recycleCenter={originStyle4DomEl:null,originStyle4DragDomEl:null,effectDomChildren:[],targetDragEl:null},this.options=Object.assign({...t},i),this.domEl=e,this.dragDomEl=document.querySelector(this.options.dragSelector),null!==this.options.dragSelector&&!this.dragDomEl)throw new Error("Options Error: dragSelector is invalid.");this._init()}_init(){if(this.recycleCenter.originStyle4DomEl=this.domEl.attributes.style?this.domEl.attributes.style.value:"",this.dragDomEl&&(this.recycleCenter.originStyle4DragDomEl=this.dragDomEl.attributes.style?this.dragDomEl.attributes.style.value:""),this.domEl.style.position="fixed",this.options.center){const{width:t,height:e}=this.domEl.getBoundingClientRect();this.domEl.style.left=`calc(50% - ${t/2}px)`,this.domEl.style.top=`calc(50% - ${e/2}px)`}else this.domEl.style.left=this.options.left+"px",this.domEl.style.top=this.options.top+"px";this.domEl.style.zIndex=this.options.zIndex,this.domEl.style.cursor=null===this.options.dragSelector&&this.options.drag?"move":"auto",this.domEl.style.overflow="hidden",this.domEl.ondragstart=t=>t.preventDefault(),this.dragDomEl&&(this.dragDomEl.style.cursor=this.options.drag?"move":"auto"),this.options.zoom&&this._zoom(),this.options.drag&&this._drag()}_getDomElBorderWidth(){const t=window.getComputedStyle(this.domEl);return{borderLeftWidth:parseInt(t.borderLeftWidth,10),borderTopWidth:parseInt(t.borderTopWidth,10),borderBottomWidth:parseInt(t.borderBottomWidth,10),borderRightWidth:parseInt(t.borderRightWidth,10)}}_drag(){this.recycleCenter.targetDragEl=this.dragDomEl??this.domEl,this.recycleCenter.targetDragEl.onmousedown=t=>{t.stopPropagation();const e=t.clientX,i=t.clientY,{width:o,height:s,left:n,top:h}=this.domEl.getBoundingClientRect();document.onmousemove=t=>{const l=Math.max(0,Math.min(n+t.clientX-e,window.innerWidth-o)),r=Math.max(0,Math.min(h+t.clientY-i,window.innerHeight-s));if(this.eventCenter.drag){const t=this._createEventObj("drag",{width:o,height:s,left:l,top:r});this.eventCenter.drag(t)}this.domEl.style.left=l+"px",this.domEl.style.top=r+"px"},document.onmouseup=()=>{document.onmousemove=null}}}_zoom(){this._addCorner(),this._addBorder()}_addCorner(){const{borderLeftWidth:t,borderTopWidth:e,borderBottomWidth:i,borderRightWidth:o}=this._getDomElBorderWidth();if(!this.options.limitZoomArea.includes("leftTop")){const i=document.createElement("div");i.style.width=this.options.cornerSize+"px",i.style.height=this.options.cornerSize+"px",i.style.position="absolute",i.style.left=-(this.options.cornerSize/2+t)+"px",i.style.top=-(this.options.cornerSize/2+e)+"px",i.style.cursor="nw-resize",this.domEl.append(i),this.recycleCenter.effectDomChildren.push(i),this._leftTopZoom(i)}if(!this.options.limitZoomArea.includes("rightTop")){const t=document.createElement("div");t.style.width=this.options.cornerSize+"px",t.style.height=this.options.cornerSize+"px",t.style.position="absolute",t.style.right=-(this.options.cornerSize/2+o)+"px",t.style.top=-(this.options.cornerSize/2+e)+"px",t.style.cursor="ne-resize",this.domEl.append(t),this.recycleCenter.effectDomChildren.push(t),this._rightTopZoom(t)}if(!this.options.limitZoomArea.includes("rightBottom")){const t=document.createElement("div");t.style.width=this.options.cornerSize+"px",t.style.height=this.options.cornerSize+"px",t.style.position="absolute",t.style.right=-(this.options.cornerSize/2+o)+"px",t.style.bottom=-(this.options.cornerSize/2+i)+"px",t.style.cursor="se-resize",this.domEl.append(t),this.recycleCenter.effectDomChildren.push(t),this._rightBottomZoom(t)}if(!this.options.limitZoomArea.includes("leftBottom")){const e=document.createElement("div");e.style.width=this.options.cornerSize+"px",e.style.height=this.options.cornerSize+"px",e.style.position="absolute",e.style.left=-(this.options.cornerSize/2+t)+"px",e.style.bottom=-(this.options.cornerSize/2+i)+"px",e.style.cursor="sw-resize",this.domEl.append(e),this.recycleCenter.effectDomChildren.push(e),this._leftBottomZoom(e)}}_addBorder(){const{borderLeftWidth:t,borderTopWidth:e,borderBottomWidth:i,borderRightWidth:o}=this._getDomElBorderWidth();if(!this.options.limitZoomArea.includes("left")){const o=document.createElement("div");o.style.width=this.options.borderSize+"px",o.style.height=`calc(100% + ${e+i}px - ${this.options.cornerSize}px)`,o.style.position="absolute",o.style.left=-(this.options.borderSize/2+t)+"px",o.style.top=this.options.cornerSize/2-e+"px",o.style.cursor="col-resize",this.domEl.append(o),this.recycleCenter.effectDomChildren.push(o),this._leftZoom(o)}if(!this.options.limitZoomArea.includes("top")){const i=document.createElement("div");i.style.width=`calc(100% + ${t+o}px - ${this.options.cornerSize}px)`,i.style.height=this.options.borderSize+"px",i.style.position="absolute",i.style.left=this.options.cornerSize/2-t+"px",i.style.top=-(this.options.borderSize/2+e)+"px",i.style.cursor="row-resize",this.domEl.append(i),this.recycleCenter.effectDomChildren.push(i),this._topZoom(i)}if(!this.options.limitZoomArea.includes("right")){const t=document.createElement("div");t.style.width=this.options.borderSize+"px",t.style.height=`calc(100% + ${e+i}px - ${this.options.cornerSize}px)`,t.style.position="absolute",t.style.right=-(this.options.borderSize/2+o)+"px",t.style.top=this.options.cornerSize/2-e+"px",t.style.cursor="col-resize",this.domEl.append(t),this.recycleCenter.effectDomChildren.push(t),this._rightZoom(t)}if(!this.options.limitZoomArea.includes("bottom")){const e=document.createElement("div");e.style.width=`calc(100% + ${t+o}px - ${this.options.cornerSize}px)`,e.style.height=this.options.borderSize+"px",e.style.position="absolute",e.style.left=this.options.cornerSize/2-t+"px",e.style.bottom=-(this.options.borderSize/2+i)+"px",e.style.cursor="row-resize",this.domEl.append(e),this.recycleCenter.effectDomChildren.push(e),this._bottomZoom(e)}}_leftZoom(t){t.addEventListener("mousedown",(t=>{t.stopPropagation();const e=t.clientX,{width:i,height:o,left:s,top:n}=this.domEl.getBoundingClientRect();document.onmousemove=t=>{const h=Math.max(this.options.minWidth,Math.min(i+e-t.clientX,i+s)),l=o,r=Math.max(0,Math.min(s+t.clientX-e,i+s-this.options.minWidth)),d=n;if(this.eventCenter.resize){const t=this._createEventObj("resize_border",{width:h,height:l,left:r,top:d});this.eventCenter.resize(t)}this.domEl.style.width=h+"px",this.domEl.style.left=r+"px"},document.onmouseup=()=>{document.onmousemove=null}}))}_topZoom(t){t.addEventListener("mousedown",(t=>{t.stopPropagation();const e=t.clientY,{width:i,height:o,left:s,top:n}=this.domEl.getBoundingClientRect();document.onmousemove=t=>{const h=i,l=Math.max(this.options.minHeight,Math.min(o+e-t.clientY,o+n)),r=s,d=Math.max(0,Math.min(n+t.clientY-e,o+n-this.options.minHeight));if(this.eventCenter.resize){const t=this._createEventObj("resize_border",{width:h,height:l,left:r,top:d});this.eventCenter.resize(t)}this.domEl.style.height=l+"px",this.domEl.style.top=d+"px"},document.onmouseup=()=>{document.onmousemove=null}}))}_rightZoom(t){t.addEventListener("mousedown",(t=>{t.stopPropagation();const e=t.clientX,{width:i,height:o,left:s,top:n}=this.domEl.getBoundingClientRect();document.onmousemove=t=>{const h=Math.max(this.options.minWidth,Math.min(i+t.clientX-e,window.innerWidth-s)),l=o,r=s,d=n;if(this.eventCenter.resize){const t=this._createEventObj("resize_border",{width:h,height:l,left:r,top:d});this.eventCenter.resize(t)}this.domEl.style.width=h+"px",this.domEl.style.left=r+"px"},document.onmouseup=()=>{document.onmousemove=null}}))}_bottomZoom(t){t.addEventListener("mousedown",(t=>{t.stopPropagation();const e=t.clientY,{width:i,height:o,left:s,top:n}=this.domEl.getBoundingClientRect();document.onmousemove=t=>{const h=i,l=Math.max(this.options.minHeight,Math.min(o+t.clientY-e,window.innerHeight-n)),r=s,d=n;if(this.eventCenter.resize){const t=this._createEventObj("resize_border",{width:h,height:l,left:r,top:d});this.eventCenter.resize(t)}this.domEl.style.height=l+"px",this.domEl.style.top=d+"px"},document.onmouseup=()=>{document.onmousemove=null}}))}_leftTopZoom(t){t.addEventListener("mousedown",(t=>{t.stopPropagation();const e=t.clientX,i=t.clientY,{width:o,height:s,left:n,top:h}=this.domEl.getBoundingClientRect();document.onmousemove=t=>{const l=Math.max(this.options.minWidth,Math.min(o+e-t.clientX,o+n)),r=Math.max(this.options.minHeight,Math.min(s+i-t.clientY,s+h)),d=Math.max(0,Math.min(n+t.clientX-e,o+n-this.options.minWidth)),m=Math.max(0,Math.min(h+t.clientY-i,s+h-this.options.minHeight));if(this.eventCenter.resize){const t=this._createEventObj("resize_corner",{width:l,height:r,left:d,top:m});this.eventCenter.resize(t)}this.domEl.style.width=l+"px",this.domEl.style.height=r+"px",this.domEl.style.left=d+"px",this.domEl.style.top=m+"px"},document.onmouseup=()=>{document.onmousemove=null}}))}_rightTopZoom(t){t.addEventListener("mousedown",(t=>{t.stopPropagation();const e=t.clientX,i=t.clientY,{width:o,height:s,left:n,top:h}=this.domEl.getBoundingClientRect();document.onmousemove=t=>{const l=Math.max(this.options.minWidth,Math.min(o+t.clientX-e,window.innerWidth-n)),r=Math.max(this.options.minHeight,Math.min(s+i-t.clientY,s+h)),d=n,m=Math.max(0,Math.min(h+t.clientY-i,s+h-this.options.minHeight));if(this.eventCenter.resize){const t=this._createEventObj("resize_corner",{width:l,height:r,left:d,top:m});this.eventCenter.resize(t)}this.domEl.style.width=l+"px",this.domEl.style.height=r+"px",this.domEl.style.left=d+"px",this.domEl.style.top=m+"px"},document.onmouseup=()=>{document.onmousemove=null}}))}_rightBottomZoom(t){t.addEventListener("mousedown",(t=>{t.stopPropagation();const e=t.clientX,i=t.clientY,{width:o,height:s,left:n,top:h}=this.domEl.getBoundingClientRect();document.onmousemove=t=>{const l=Math.max(this.options.minWidth,Math.min(o+t.clientX-e,window.innerWidth-n)),r=Math.max(this.options.minHeight,Math.min(s+t.clientY-i,window.innerHeight-h)),d=n,m=h;if(this.eventCenter.resize){const t=this._createEventObj("resize_corner",{width:l,height:r,left:d,top:m});this.eventCenter.resize(t)}this.domEl.style.width=l+"px",this.domEl.style.height=r+"px",this.domEl.style.left=d+"px",this.domEl.style.top=m+"px"},document.onmouseup=()=>{document.onmousemove=null}}))}_leftBottomZoom(t){t.addEventListener("mousedown",(t=>{t.stopPropagation();const e=t.clientX,i=t.clientY,{width:o,height:s,left:n,top:h}=this.domEl.getBoundingClientRect();document.onmousemove=t=>{const l=Math.max(this.options.minWidth,Math.min(o+e-t.clientX,o+n)),r=Math.max(this.options.minHeight,Math.min(s+t.clientY-i,window.innerHeight-h)),d=Math.max(0,Math.min(n+t.clientX-e,o+n-this.options.minWidth)),m=h;if(this.eventCenter.resize){const t=this._createEventObj("resize_corner",{width:l,height:r,left:d,top:m});this.eventCenter.resize(t)}this.domEl.style.width=l+"px",this.domEl.style.height=r+"px",this.domEl.style.left=d+"px",this.domEl.style.top=m+"px"},document.onmouseup=()=>{document.onmousemove=null}}))}_createEventObj(t,e){return{name:t,data:e}}_checkStatus(){switch(this.status){case"active":return;case"dead":throw new Error("The status of the instance is dead.")}}setFullScreen(){this._checkStatus(),this.record={left:this.domEl.style.left,top:this.domEl.style.top,width:this.domEl.style.width,height:this.domEl.style.height},this.domEl.style.left=0,this.domEl.style.top=0,this.domEl.style.width=window.innerWidth+"px",this.domEl.style.height=window.innerHeight+"px"}exitFullScreen(){if(this._checkStatus(),this.record){const{left:t,top:e,width:i,height:o}=this.record;this.domEl.style.left=t,this.domEl.style.top=e,this.domEl.style.width=i,this.domEl.style.height=o}}setMinWidth(t){this._checkStatus();const{width:e}=this.domEl.getBoundingClientRect();e<t&&(this.domEl.style.width=t+"px"),this.options.minWidth=t}setMinHeight(t){this._checkStatus();const{height:e}=this.domEl.getBoundingClientRect();e<t&&(this.domEl.style.height=t+"px"),this.options.minHeight=t}addEventListener(t,e){this._checkStatus(),this.eventCenter[t]=e}removeEventListener(t){this._checkStatus(),this.eventCenter[t]=null,delete this.eventCenter[t]}reset(){this._checkStatus(),this.recycleCenter.effectDomChildren.forEach((t=>{this.domEl.removeChild(t)})),this.options.drag&&(this.recycleCenter.targetDragEl.onmousedown=null,document.onmousemove=null,document.onmouseup=null),this.domEl.setAttribute("style",this.recycleCenter.originStyle4DomEl),this.dragDomEl&&this.dragDomEl.setAttribute("style",this.recycleCenter.originStyle4DragDomEl),this.status="dead"}}}();
