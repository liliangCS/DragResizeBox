var DragResizeBox=function(){"use strict";const t={drag:!0,zoom:!0,minWidth:0,minHeight:0,zIndex:9999,dragSelector:null,left:0,top:0,cornerSize:16,borderSize:12,center:!1,limitZoomArea:[],position:"fixed"};return class{constructor(o,i){if(this.options=Object.assign({...t},i),this.domEl=o,this.dragDomEl=document.querySelector(this.options.dragSelector),null!==this.options.dragSelector&&!this.dragDomEl)throw new Error("Options Error: dragSelector is invalid.");this._init()}_init(){if(this.domEl.style.position=this.options.position,this.options.center){const{width:t,height:o}=this.domEl.getBoundingClientRect();this.domEl.style.left=`calc(50% - ${t/2}px)`,this.domEl.style.top=`calc(50% - ${o/2}px)`}else this.domEl.style.left=this.options.left+"px",this.domEl.style.top=this.options.top+"px";this.domEl.style.zIndex=this.options.zIndex,this.domEl.style.cursor=null===this.options.dragSelector&&this.options.drag?"move":"auto",this.domEl.style.overflow="hidden",this.domEl.ondragstart=t=>t.preventDefault(),this.dragDomEl&&(this.dragDomEl.style.cursor=this.options.drag?"move":"auto"),this.options.zoom&&this._zoom(),this.options.drag&&this._drag()}_getDomElBorderWidth(){const t=window.getComputedStyle(this.domEl);return{borderLeftWidth:parseInt(t.borderLeftWidth,10),borderTopWidth:parseInt(t.borderTopWidth,10),borderBottomWidth:parseInt(t.borderBottomWidth,10),borderRightWidth:parseInt(t.borderRightWidth,10)}}_drag(){(this.dragDomEl??this.domEl).addEventListener("mousedown",(t=>{t.stopPropagation();const o=t.clientX,i=t.clientY,{width:e,height:s,left:n,top:h}=this.domEl.getBoundingClientRect();document.onmousemove=t=>{const l=Math.max(0,Math.min(n+t.clientX-o,window.innerWidth-e)),d=Math.max(0,Math.min(h+t.clientY-i,window.innerHeight-s));this.domEl.style.left=l+"px",this.domEl.style.top=d+"px"},document.onmouseup=()=>{document.onmousemove=null}}))}_zoom(){this._addCorner(),this._addBorder()}_addCorner(){const{borderLeftWidth:t,borderTopWidth:o,borderBottomWidth:i,borderRightWidth:e}=this._getDomElBorderWidth();if(!this.options.limitZoomArea.includes("leftTop")){const i=document.createElement("div");i.style.width=this.options.cornerSize+"px",i.style.height=this.options.cornerSize+"px",i.style.position="absolute",i.style.left=-(this.options.cornerSize/2+t)+"px",i.style.top=-(this.options.cornerSize/2+o)+"px",i.style.cursor="nw-resize",this.domEl.append(i),this._leftTopZoom(i)}if(!this.options.limitZoomArea.includes("rightTop")){const t=document.createElement("div");t.style.width=this.options.cornerSize+"px",t.style.height=this.options.cornerSize+"px",t.style.position="absolute",t.style.right=-(this.options.cornerSize/2+e)+"px",t.style.top=-(this.options.cornerSize/2+o)+"px",t.style.cursor="ne-resize",this.domEl.append(t),this._rightTopZoom(t)}if(!this.options.limitZoomArea.includes("rightBottom")){const t=document.createElement("div");t.style.width=this.options.cornerSize+"px",t.style.height=this.options.cornerSize+"px",t.style.position="absolute",t.style.right=-(this.options.cornerSize/2+e)+"px",t.style.bottom=-(this.options.cornerSize/2+i)+"px",t.style.cursor="se-resize",this.domEl.append(t),this._rightBottomZoom(t)}if(!this.options.limitZoomArea.includes("leftBottom")){const o=document.createElement("div");o.style.width=this.options.cornerSize+"px",o.style.height=this.options.cornerSize+"px",o.style.position="absolute",o.style.left=-(this.options.cornerSize/2+t)+"px",o.style.bottom=-(this.options.cornerSize/2+i)+"px",o.style.cursor="sw-resize",this.domEl.append(o),this._leftBottomZoom(o)}}_addBorder(){const{borderLeftWidth:t,borderTopWidth:o,borderBottomWidth:i,borderRightWidth:e}=this._getDomElBorderWidth();if(!this.options.limitZoomArea.includes("left")){const e=document.createElement("div");e.style.width=this.options.borderSize+"px",e.style.height=`calc(100% + ${o+i}px - ${this.options.cornerSize}px)`,e.style.position="absolute",e.style.left=-(this.options.borderSize/2+t)+"px",e.style.top=this.options.cornerSize/2-o+"px",e.style.cursor="col-resize",this.domEl.append(e),this._leftZoom(e)}if(!this.options.limitZoomArea.includes("top")){const i=document.createElement("div");i.style.width=`calc(100% + ${t+e}px - ${this.options.cornerSize}px)`,i.style.height=this.options.borderSize+"px",i.style.position="absolute",i.style.left=this.options.cornerSize/2-t+"px",i.style.top=-(this.options.borderSize/2+o)+"px",i.style.cursor="row-resize",this.domEl.append(i),this._topZoom(i)}if(!this.options.limitZoomArea.includes("right")){const t=document.createElement("div");t.style.width=this.options.borderSize+"px",t.style.height=`calc(100% + ${o+i}px - ${this.options.cornerSize}px)`,t.style.position="absolute",t.style.right=-(this.options.borderSize/2+e)+"px",t.style.top=this.options.cornerSize/2-o+"px",t.style.cursor="col-resize",this.domEl.append(t),this._rightZoom(t)}if(!this.options.limitZoomArea.includes("bottom")){const o=document.createElement("div");o.style.width=`calc(100% + ${t+e}px - ${this.options.cornerSize}px)`,o.style.height=this.options.borderSize+"px",o.style.position="absolute",o.style.left=this.options.cornerSize/2-t+"px",o.style.bottom=-(this.options.borderSize/2+i)+"px",o.style.cursor="row-resize",this.domEl.append(o),this._bottomZoom(o)}}_leftZoom(t){t.addEventListener("mousedown",(t=>{t.stopPropagation();const o=t.clientX,{width:i,left:e}=this.domEl.getBoundingClientRect();document.onmousemove=t=>{const s=Math.max(this.options.minWidth,Math.min(i+o-t.clientX,i+e)),n=Math.max(0,Math.min(e+t.clientX-o,i+e-this.options.minWidth));this.domEl.style.width=s+"px",this.domEl.style.left=n+"px"},document.onmouseup=()=>{document.onmousemove=null}}))}_topZoom(t){t.addEventListener("mousedown",(t=>{t.stopPropagation();const o=t.clientY,{height:i,top:e}=this.domEl.getBoundingClientRect();document.onmousemove=t=>{const s=Math.max(this.options.minHeight,Math.min(i+o-t.clientY,i+e)),n=Math.max(0,Math.min(e+t.clientY-o,i+e-this.options.minHeight));this.domEl.style.height=s+"px",this.domEl.style.top=n+"px"},document.onmouseup=()=>{document.onmousemove=null}}))}_rightZoom(t){t.addEventListener("mousedown",(t=>{t.stopPropagation();const o=t.clientX,{width:i,left:e}=this.domEl.getBoundingClientRect();document.onmousemove=t=>{const s=Math.max(this.options.minWidth,Math.min(i+t.clientX-o,window.innerWidth-e)),n=e;this.domEl.style.width=s+"px",this.domEl.style.left=n+"px"},document.onmouseup=()=>{document.onmousemove=null}}))}_bottomZoom(t){t.addEventListener("mousedown",(t=>{t.stopPropagation();const o=t.clientY,{height:i,top:e}=this.domEl.getBoundingClientRect();document.onmousemove=t=>{const s=Math.max(this.options.minHeight,Math.min(i+t.clientY-o,window.innerHeight-e)),n=e;this.domEl.style.height=s+"px",this.domEl.style.top=n+"px"},document.onmouseup=()=>{document.onmousemove=null}}))}_leftTopZoom(t){t.addEventListener("mousedown",(t=>{t.stopPropagation();const o=t.clientX,i=t.clientY,{width:e,height:s,left:n,top:h}=this.domEl.getBoundingClientRect();document.onmousemove=t=>{const l=Math.max(this.options.minWidth,Math.min(e+o-t.clientX,e+n)),d=Math.max(this.options.minHeight,Math.min(s+i-t.clientY,s+h)),m=Math.max(0,Math.min(n+t.clientX-o,e+n-this.options.minWidth)),r=Math.max(0,Math.min(h+t.clientY-i,s+h-this.options.minHeight));this.domEl.style.width=l+"px",this.domEl.style.height=d+"px",this.domEl.style.left=m+"px",this.domEl.style.top=r+"px"},document.onmouseup=()=>{document.onmousemove=null}}))}_rightTopZoom(t){t.addEventListener("mousedown",(t=>{t.stopPropagation();const o=t.clientX,i=t.clientY,{width:e,height:s,left:n,top:h}=this.domEl.getBoundingClientRect();document.onmousemove=t=>{const l=Math.max(this.options.minWidth,Math.min(e+t.clientX-o,window.innerWidth-n)),d=Math.max(this.options.minHeight,Math.min(s+i-t.clientY,s+h)),m=n,r=Math.max(0,Math.min(h+t.clientY-i,s+h-this.options.minHeight));this.domEl.style.width=l+"px",this.domEl.style.height=d+"px",this.domEl.style.left=m+"px",this.domEl.style.top=r+"px"},document.onmouseup=()=>{document.onmousemove=null}}))}_rightBottomZoom(t){t.addEventListener("mousedown",(t=>{t.stopPropagation();const o=t.clientX,i=t.clientY,{width:e,height:s,left:n,top:h}=this.domEl.getBoundingClientRect();document.onmousemove=t=>{const l=Math.max(this.options.minWidth,Math.min(e+t.clientX-o,window.innerWidth-n)),d=Math.max(this.options.minHeight,Math.min(s+t.clientY-i,window.innerHeight-h)),m=n,r=h;this.domEl.style.width=l+"px",this.domEl.style.height=d+"px",this.domEl.style.left=m+"px",this.domEl.style.top=r+"px"},document.onmouseup=()=>{document.onmousemove=null}}))}_leftBottomZoom(t){t.addEventListener("mousedown",(t=>{t.stopPropagation();const o=t.clientX,i=t.clientY,{width:e,height:s,left:n,top:h}=this.domEl.getBoundingClientRect();document.onmousemove=t=>{const l=Math.max(this.options.minWidth,Math.min(e+o-t.clientX,e+n)),d=Math.max(this.options.minHeight,Math.min(s+t.clientY-i,window.innerHeight-h)),m=Math.max(0,Math.min(n+t.clientX-o,e+n-this.options.minWidth)),r=h;this.domEl.style.width=l+"px",this.domEl.style.height=d+"px",this.domEl.style.left=m+"px",this.domEl.style.top=r+"px"},document.onmouseup=()=>{document.onmousemove=null}}))}setFullScreen(){this.record={left:this.domEl.style.left,top:this.domEl.style.top,width:this.domEl.style.width,height:this.domEl.style.height},this.domEl.style.left=0,this.domEl.style.top=0,this.domEl.style.width=window.innerWidth+"px",this.domEl.style.height=window.innerHeight+"px"}exitFullScreen(){if(this.record){const{left:t,top:o,width:i,height:e}=this.record;this.domEl.style.left=t,this.domEl.style.top=o,this.domEl.style.width=i,this.domEl.style.height=e}}setMinWidth(t){const{width:o}=this.domEl.getBoundingClientRect();o<t&&(this.domEl.style.width=t+"px"),this.options.minWidth=t}setMinHeight(t){const{height:o}=this.domEl.getBoundingClientRect();o<t&&(this.domEl.style.height=t+"px"),this.options.minHeight=t}}}();
